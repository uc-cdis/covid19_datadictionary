$schema: "http://json-schema.org/draft-04/schema#"

id: "clinical_trials"
title: Clinical Trials
type: object
namespace: https://chicagoland.pandemicresponsecommons.org
category: administrative
program: '*'
project: '*'
description: >
  The collection of data related to clinical trials.
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - created_datetime
  - updated_datetime
  - state

links:
  - exclusive: false
    required: true
    subgroup:
    - name: subjects
      backref: clinical_trials
      label: member_of
      target_type: subject
      multiplicity: many_to_many
      required: false
    - name: projects
      backref: clinical_trials
      label: data_from
      target_type: project
      multiplicity: many_to_one
      required: false

required:
  - submitter_id
  - type

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

# Case properties
properties:
  $ref: "_definitions.yaml#/ubiquitous_properties"

  title:
    description: >
      A short, descriptive user-friendly label for the study (vaccine or drug candidates name).
    type: string

  focus:
    description: >
      The medication(s), food(s), therapy(ies), device(s) or other concerns or interventions that the study is seeking to gain more information about (Vaccine or drug candidates name).
    enum:
      - "Treatment"
      - "Vaccine"

  technology:
    description: >
      The technology used for the trial.
    enum:
      - "Antibodies"
      - "Antivirals"
      - "Cell-based therapies"
      - "Device"
      - "DNA-based"
      - "Inactivated virus"
      - "Modified APC"
      - "Non-replicating viral vector"
      - "Protein subunit"
      - "RNA-based treatments"
      - "RNA-based vaccine"
      - "Repurposed"
      - "Virus Like Particle"
      - "Other"

  technology_details:
    description: >
      The details regarding the technology used for the trial.
    type: string

  sponsor:
    description: >
      An organization that initiates the investigation and is legally responsible for the study. Organization(s)
    type: array
    items:
      type: string

  development_stage:
    description: >
      Development Stage
    enum:
      - "Preclinical Phase"
      - "Clinical"

  description:
    description: >
      A full description of how the study is being conducted.
    type: string

  phase:
    description: >
      The stage in the progression of a therapy from initial experimental use in humans in clinical trials to post-market evaluation (Custom Clinical Phase).
    enum:
      - "Preclinical Phase"
      - "Phase I"
      - "Phase I/II"
      - "Phase II"
      - "Phase I/II/III"
      - "Phase III"
      - "Phase III/IV"
      - "Phase IV"
      - "Phase I/III/IV"
      - "Phase I/IV"
      - "Phase II/IV"
      - "Phase II/III/IV"
      - "Phase I/II/III/IV"
      - "Phase II/III"
      - "Phase N/A"

  clinical_trials:
    description: >
      Indication of clinical trial numbers associated with a study.
    type: array
    items:
      type: string

  status:
    description: >
      The current state of the study (FDA approved).
    enum:
      - "Yes"
      - "No"
      - "Unknown"
      - "NA"

  completed_clinical_trials:
    description: >
      Completed clinical trials
    type: array
    items:
      type: string

  inprogress_clinical_trials:
    description: >
      In progress Clinical Trials
    type: array
    items:
      type: string

  countries:
    description: >
      The countries where the clinical trial took place.
    type: array
    items:
      type: string

  subjects:
    $ref: "_definitions.yaml#/to_many"
  projects:
    $ref: "_definitions.yaml#/to_one_project"